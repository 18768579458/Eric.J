<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <!-- <script>
        function xhr1(){
            return new Promise(
                function(door){
                    console.log(`出门买菜...`);
                    setTimeout(function(){
                        console.log(`买回来了`);
                        door();
                    }, Math.random()*3*1000+1000);
                }
            )
        }
        function xhr2(){
            return new Promise(
                function(door){
                    console.log(`回家做菜...`);
                    setTimeout(function(){
                        console.log(`做完了`);
                        door();
                    }, Math.random()*3*1000+1000);
                }
            )
        }
        xhr1().then(xhr2).then(function(){console.log(`吃完了`);});
    </script> -->
     <script>
        function xhr1(){
            return new Promise(
                function(door,err){
                    console.log(`出门买菜...`);
                    setTimeout(function(){
                        if(Math.random()<0.7){
                            var cai="排骨";
                            console.log(`买回${cai}了`);
                            door(cai);                            
                        }else{
                            console.log("钱被偷了");
                            err("买不了了...(╥╯^╰╥)");
                        }
                    }, Math.random()*3*1000+1000);
                }
            )
        }
        function xhr2(){
            return new Promise(
                function(door,err){
                    console.log(`回家做菜...`);
                    setTimeout(function(){
                        if(Math.random()<0.7){
                            var cai2="红烧排骨";
                            console.log(`${cai2}做完了`);
                            door(cai2);
                        }else{
                            console.log(`锅炸了`);
                            err("被迫点外卖");
                        }
                    }, Math.random()*3*1000+1000);
                }
            )
        }
        xhr1().then(xhr2).then(function(cai2){console.log(`吃${cai2},真香`);});
    </script>
</body>
</html>